{"ast":null,"code":"import _slicedToArray from\"/Users/andrewyusuf/movie-rating-sideproject/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _taggedTemplateLiteral from\"/Users/andrewyusuf/movie-rating-sideproject/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject,_templateObject2,_templateObject3,_templateObject4,_templateObject5;import React,{useEffect,useState}from'react';import styled from\"styled-components\";import{onSnapshot,doc}from\"firebase/firestore\";import{db,auth}from\"../firebase\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var UserWrapper=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n    border-bottom: 2px solid #000000;\\n    padding: 10px;\\n    cursor: pointer;\\n\\n    &:hover {\\n        background-color: #778899;\\n    }\\n\\n    &.selected {\\n        background-color: #778899;\\n    }\\n\"])));var UserInfo=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n    display: flex;\\n    align-items: center;\\n\"])));var LastMessageP=styled.p(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n  font-size: 14px;\\n  white-space: nowrap;\\n  width: 90%;\\n  overflow: hidden;\\n  text-overflow: ellipsis;\\n\"])));var LastMessageStrong=styled.strong(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\\n    margin-right: 7px;\\n    margin-left: 10px;\\n\\n\"])));var UnreadMessage=styled.small(_templateObject5||(_templateObject5=_taggedTemplateLiteral([\"\\n    margin-left: 10px;\\n    background: #0084ff;\\n    color: white;\\n    padding: 2px 4px;\\n    border-radius: 10px;\\n\"])));var User=function User(_ref){var _auth$currentUser;var user=_ref.user,selectUser=_ref.selectUser,chat=_ref.chat;var user2=user===null||user===void 0?void 0:user.uid;var user1=(_auth$currentUser=auth.currentUser)===null||_auth$currentUser===void 0?void 0:_auth$currentUser.uid;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];// this will hold the last msg\nuseEffect(function(){var id=user1>user2?\"\".concat(user1+user2):\"\".concat(user2+user1);var unsub=onSnapshot(doc(db,\"lastMessage\",id),function(doc){setData(doc.data());});return function(){return unsub();};},[]);return/*#__PURE__*/_jsxs(UserWrapper,{className:\"\".concat(user.name===chat.name?'selected':\"\"),onClick:function onClick(){return selectUser(user);},children:[/*#__PURE__*/_jsxs(UserInfo,{children:[/*#__PURE__*/_jsx(\"img\",{width:\"50\",height:\"50\",style:{borderRadius:'50%'},src:user.photoURL,alt:\"Profile pic\"}),/*#__PURE__*/_jsx(\"p\",{style:{marginLeft:'10px'},children:user.name}),(data===null||data===void 0?void 0:data.from)!==user1&&(data===null||data===void 0?void 0:data.unread)&&/*#__PURE__*/_jsx(UnreadMessage,{children:\"~New~\"})]}),data&&/*#__PURE__*/_jsxs(LastMessageP,{className:\"truncate\",children:[/*#__PURE__*/_jsx(LastMessageStrong,{children:data.from===user1?\"Me: \":null}),data.text]})]});};export default User;","map":{"version":3,"names":["React","useEffect","useState","styled","onSnapshot","doc","db","auth","UserWrapper","div","UserInfo","LastMessageP","p","LastMessageStrong","strong","UnreadMessage","small","User","user","selectUser","chat","user2","uid","user1","currentUser","data","setData","id","unsub","name","borderRadius","photoURL","marginLeft","from","unread","text"],"sources":["/Users/andrewyusuf/movie-rating-sideproject/src/components/User.js"],"sourcesContent":["import React, {useEffect, useState} from 'react'\nimport styled from \"styled-components\"\nimport {onSnapshot, doc} from \"firebase/firestore\"\nimport {db, auth} from \"../firebase\"\n\n\nconst UserWrapper = styled.div`\n    border-bottom: 2px solid #000000;\n    padding: 10px;\n    cursor: pointer;\n\n    &:hover {\n        background-color: #778899;\n    }\n\n    &.selected {\n        background-color: #778899;\n    }\n`\n\nconst UserInfo = styled.div`\n    display: flex;\n    align-items: center;\n`\n\nconst LastMessageP = styled.p`\n  font-size: 14px;\n  white-space: nowrap;\n  width: 90%;\n  overflow: hidden;\n  text-overflow: ellipsis;\n`\n\nconst LastMessageStrong = styled.strong`\n    margin-right: 7px;\n    margin-left: 10px;\n\n`\n\nconst UnreadMessage = styled.small`\n    margin-left: 10px;\n    background: #0084ff;\n    color: white;\n    padding: 2px 4px;\n    border-radius: 10px;\n`\n\n\n\nconst User = ({user, selectUser, chat}) => {\n    const user2 = user?.uid;\n    const user1 = auth.currentUser?.uid;\n    const [data, setData] = useState(''); // this will hold the last msg\n\n    useEffect(() => {\n        const id = user1 > user2 ? `${user1 + user2}` : `${user2 + user1}`;\n        let unsub = onSnapshot(doc(db, \"lastMessage\", id), (doc) => {\n            setData(doc.data());\n        })\n\n        return () => unsub();\n    }, [])\n\n\n  return (\n    <UserWrapper className={`${user.name === chat.name ? 'selected' : \"\"}`} onClick={() => selectUser(user)}>\n        <UserInfo>\n            <img width='50' height='50' style={{borderRadius: '50%'}} src={user.photoURL} alt=\"Profile pic\"/>\n            <p style={{marginLeft: '10px'}}>{user.name}</p>\n            {data?.from !== user1 && data?.unread && (\n                <UnreadMessage>~New~</UnreadMessage>\n            )}\n\n        </UserInfo>\n        {data && (\n            <LastMessageP className='truncate'>\n                <LastMessageStrong>{data.from === user1 ? \"Me: \" : null}</LastMessageStrong>\n                {data.text}\n            </LastMessageP>\n        )}\n    </UserWrapper>\n  )\n}\n\nexport default User"],"mappings":"0WAAA,MAAOA,MAAP,EAAeC,SAAf,CAA0BC,QAA1B,KAAyC,OAAzC,CACA,MAAOC,OAAP,KAAmB,mBAAnB,CACA,OAAQC,UAAR,CAAoBC,GAApB,KAA8B,oBAA9B,CACA,OAAQC,EAAR,CAAYC,IAAZ,KAAuB,aAAvB,C,wFAGA,GAAMC,YAAW,CAAGL,MAAM,CAACM,GAAV,+QAAjB,CAcA,GAAMC,SAAQ,CAAGP,MAAM,CAACM,GAAV,mHAAd,CAKA,GAAME,aAAY,CAAGR,MAAM,CAACS,CAAV,iLAAlB,CAQA,GAAMC,kBAAiB,CAAGV,MAAM,CAACW,MAAV,uHAAvB,CAMA,GAAMC,cAAa,CAAGZ,MAAM,CAACa,KAAV,2LAAnB,CAUA,GAAMC,KAAI,CAAG,QAAPA,KAAO,MAA8B,0BAA5BC,KAA4B,MAA5BA,IAA4B,CAAtBC,UAAsB,MAAtBA,UAAsB,CAAVC,IAAU,MAAVA,IAAU,CACvC,GAAMC,MAAK,CAAGH,IAAH,SAAGA,IAAH,iBAAGA,IAAI,CAAEI,GAApB,CACA,GAAMC,MAAK,oBAAGhB,IAAI,CAACiB,WAAR,4CAAG,kBAAkBF,GAAhC,CACA,cAAwBpB,QAAQ,CAAC,EAAD,CAAhC,wCAAOuB,IAAP,eAAaC,OAAb,eAAsC;AAEtCzB,SAAS,CAAC,UAAM,CACZ,GAAM0B,GAAE,CAAGJ,KAAK,CAAGF,KAAR,WAAmBE,KAAK,CAAGF,KAA3B,YAAwCA,KAAK,CAAGE,KAAhD,CAAX,CACA,GAAIK,MAAK,CAAGxB,UAAU,CAACC,GAAG,CAACC,EAAD,CAAK,aAAL,CAAoBqB,EAApB,CAAJ,CAA6B,SAACtB,GAAD,CAAS,CACxDqB,OAAO,CAACrB,GAAG,CAACoB,IAAJ,EAAD,CAAP,CACH,CAFqB,CAAtB,CAIA,MAAO,kBAAMG,MAAK,EAAX,EAAP,CACH,CAPQ,CAON,EAPM,CAAT,CAUF,mBACE,MAAC,WAAD,EAAa,SAAS,WAAKV,IAAI,CAACW,IAAL,GAAcT,IAAI,CAACS,IAAnB,CAA0B,UAA1B,CAAuC,EAA5C,CAAtB,CAAwE,OAAO,CAAE,yBAAMV,WAAU,CAACD,IAAD,CAAhB,EAAjF,wBACI,MAAC,QAAD,yBACI,YAAK,KAAK,CAAC,IAAX,CAAgB,MAAM,CAAC,IAAvB,CAA4B,KAAK,CAAE,CAACY,YAAY,CAAE,KAAf,CAAnC,CAA0D,GAAG,CAAEZ,IAAI,CAACa,QAApE,CAA8E,GAAG,CAAC,aAAlF,EADJ,cAEI,UAAG,KAAK,CAAE,CAACC,UAAU,CAAE,MAAb,CAAV,UAAiCd,IAAI,CAACW,IAAtC,EAFJ,CAGK,CAAAJ,IAAI,OAAJ,EAAAA,IAAI,SAAJ,QAAAA,IAAI,CAAEQ,IAAN,IAAeV,KAAf,GAAwBE,IAAxB,SAAwBA,IAAxB,iBAAwBA,IAAI,CAAES,MAA9B,gBACG,KAAC,aAAD,oBAJR,GADJ,CASKT,IAAI,eACD,MAAC,YAAD,EAAc,SAAS,CAAC,UAAxB,wBACI,KAAC,iBAAD,WAAoBA,IAAI,CAACQ,IAAL,GAAcV,KAAd,CAAsB,MAAtB,CAA+B,IAAnD,EADJ,CAEKE,IAAI,CAACU,IAFV,GAVR,GADF,CAkBD,CAjCD,CAmCA,cAAelB,KAAf"},"metadata":{},"sourceType":"module"}