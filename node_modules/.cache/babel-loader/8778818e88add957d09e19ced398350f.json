{"ast":null,"code":"var _jsxFileName = \"/Users/andrewyusuf/movie-rating-sideproject/src/components/User.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport styled from \"styled-components\";\nimport { onSnapshot, doc } from \"firebase/firestore\";\nimport { db, auth } from \"../firebase\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst UserWrapper = styled.div`\n    border-bottom: 2px solid #000000;\n    padding: 10px;\n    cursor: pointer;\n\n    &:hover {\n        background-color: #778899;\n    }\n\n    &.selected {\n        background-color: #778899;\n    }\n`;\n_c = UserWrapper;\nconst UserInfo = styled.div`\n    display: flex;\n    align-items: center;\n`;\n_c2 = UserInfo;\nconst LastMessageP = styled.p`\n  font-size: 14px;\n  white-space: nowrap;\n  width: 90%;\n  overflow: hidden;\n  text-overflow: ellipsis;\n`;\n_c3 = LastMessageP;\nconst LastMessageStrong = styled.strong`\n    margin-right: 7px;\n    margin-left: 10px;\n\n`;\n_c4 = LastMessageStrong;\nconst UnreadMessage = styled.small`\n    margin-left: 10px;\n    background: #0084ff;\n    color: white;\n    padding: 2px 4px;\n    border-radius: 10px;\n`;\n_c5 = UnreadMessage;\n\nconst User = _ref => {\n  _s();\n\n  var _auth$currentUser;\n\n  let {\n    user,\n    selectUser\n  } = _ref;\n  const user2 = user === null || user === void 0 ? void 0 : user.uid;\n  const user1 = (_auth$currentUser = auth.currentUser) === null || _auth$currentUser === void 0 ? void 0 : _auth$currentUser.uid;\n  const [data, setData] = useState(''); // this will hold the last msg\n\n  useEffect(() => {\n    const id = user1 > user2 ? `${user1 + user2}` : `${user2 + user1}`;\n    console.log(id);\n    let unsub = onSnapshot(doc(db, \"lastMessage\", id), doc => {\n      console.log(\"in snapshot\");\n      setData(doc.data());\n    });\n    return () => unsub();\n  }, []);\n  console.log(data);\n  return /*#__PURE__*/_jsxDEV(UserWrapper, {\n    onClick: () => selectUser(user),\n    children: [/*#__PURE__*/_jsxDEV(UserInfo, {\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        width: \"50\",\n        height: \"50\",\n        style: {\n          borderRadius: '50%'\n        },\n        src: user.photoURL,\n        alt: \"Profile pic\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          marginLeft: '10px'\n        },\n        children: user.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 13\n      }, this), (data === null || data === void 0 ? void 0 : data.from) !== user1 && (data === null || data === void 0 ? void 0 : data.unread) && /*#__PURE__*/_jsxDEV(UnreadMessage, {\n        children: \"~New~\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 9\n    }, this), data && /*#__PURE__*/_jsxDEV(LastMessageP, {\n      className: \"truncate\",\n      children: [/*#__PURE__*/_jsxDEV(LastMessageStrong, {\n        children: data.from === user1 ? \"Me: \" : null\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 17\n      }, this), data.text]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 5\n  }, this);\n};\n\n_s(User, \"VZqd8eS65aqgHhr94QvD8B0VC/4=\");\n\n_c6 = User;\nexport default User;\n\nvar _c, _c2, _c3, _c4, _c5, _c6;\n\n$RefreshReg$(_c, \"UserWrapper\");\n$RefreshReg$(_c2, \"UserInfo\");\n$RefreshReg$(_c3, \"LastMessageP\");\n$RefreshReg$(_c4, \"LastMessageStrong\");\n$RefreshReg$(_c5, \"UnreadMessage\");\n$RefreshReg$(_c6, \"User\");","map":{"version":3,"names":["React","useEffect","useState","styled","onSnapshot","doc","db","auth","UserWrapper","div","UserInfo","LastMessageP","p","LastMessageStrong","strong","UnreadMessage","small","User","user","selectUser","user2","uid","user1","currentUser","data","setData","id","console","log","unsub","borderRadius","photoURL","marginLeft","name","from","unread","text"],"sources":["/Users/andrewyusuf/movie-rating-sideproject/src/components/User.js"],"sourcesContent":["import React, {useEffect, useState} from 'react'\nimport styled from \"styled-components\"\nimport {onSnapshot, doc} from \"firebase/firestore\"\nimport {db, auth} from \"../firebase\"\n\n\nconst UserWrapper = styled.div`\n    border-bottom: 2px solid #000000;\n    padding: 10px;\n    cursor: pointer;\n\n    &:hover {\n        background-color: #778899;\n    }\n\n    &.selected {\n        background-color: #778899;\n    }\n`\n\nconst UserInfo = styled.div`\n    display: flex;\n    align-items: center;\n`\n\nconst LastMessageP = styled.p`\n  font-size: 14px;\n  white-space: nowrap;\n  width: 90%;\n  overflow: hidden;\n  text-overflow: ellipsis;\n`\n\nconst LastMessageStrong = styled.strong`\n    margin-right: 7px;\n    margin-left: 10px;\n\n`\n\nconst UnreadMessage = styled.small`\n    margin-left: 10px;\n    background: #0084ff;\n    color: white;\n    padding: 2px 4px;\n    border-radius: 10px;\n`\n\n\n\nconst User = ({user, selectUser}) => {\n    const user2 = user?.uid;\n    const user1 = auth.currentUser?.uid;\n    const [data, setData] = useState(''); // this will hold the last msg\n\n    useEffect(() => {\n        const id = user1 > user2 ? `${user1 + user2}` : `${user2 + user1}`;\n        console.log(id);\n        let unsub = onSnapshot(doc(db, \"lastMessage\", id), (doc) => {\n            console.log(\"in snapshot\");\n            setData(doc.data());\n        })\n\n        return () => unsub();\n    }, [])\n    console.log(data);\n\n\n  return (\n    <UserWrapper onClick={() => selectUser(user)}>\n        <UserInfo>\n            <img width='50' height='50' style={{borderRadius: '50%'}} src={user.photoURL} alt=\"Profile pic\"/>\n            <p style={{marginLeft: '10px'}}>{user.name}</p>\n            {data?.from !== user1 && data?.unread && (\n                <UnreadMessage>~New~</UnreadMessage>\n            )}\n\n        </UserInfo>\n        {data && (\n            <LastMessageP className='truncate'>\n                <LastMessageStrong>{data.from === user1 ? \"Me: \" : null}</LastMessageStrong>\n                {data.text}\n            </LastMessageP>\n        )}\n    </UserWrapper>\n  )\n}\n\nexport default User"],"mappings":"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"},"metadata":{},"sourceType":"module"}