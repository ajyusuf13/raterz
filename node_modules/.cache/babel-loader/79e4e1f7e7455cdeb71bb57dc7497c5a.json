{"ast":null,"code":"var _jsxFileName = \"/Users/andrewyusuf/movie-rating-sideproject/src/pages/Home.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { db, auth } from '../firebase';\nimport { getAuth, onAuthStateChanged } from \"firebase/auth\";\nimport styled from \"styled-components\";\nimport User from '../components/User';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst HomeContainer = styled.div`\n    position: relative;\n    display: grid;\n    grid-template-columns: 1fr 3fr;\n    overflow: hidden;\n    height: calc(100vh - 70px);\n    width: 100vw;\n`;\n_c = HomeContainer;\nconst UserContainer = styled.div`\n    margin-top: 10px;\n    border-right: 2px solid #000000;\n    overflow-y: auto;\n`;\n_c2 = UserContainer;\nconst ChatContainter = styled.div`\n    position: relative;\n    width: 100%;\n`;\n_c3 = ChatContainter;\nconst MessagesUser = styled.div`\n    padding:10px;\n    text-align: center;\n    border-bottom: 2px solid #000000;\n`;\n_c4 = MessagesUser;\nexport const Home = () => {\n  _s();\n\n  const [users, setUsers] = useState([]);\n  const [chat, setChat] = useState(\"\");\n  useEffect(() => {\n    const authorize = getAuth();\n    onAuthStateChanged(authorize, user => {\n      if (user) {\n        var _auth$currentUser;\n\n        const usersRef = db.collection(\"users\"); // create query obj\n\n        usersRef.where('uid', 'not-in', [(_auth$currentUser = auth.currentUser) === null || _auth$currentUser === void 0 ? void 0 : _auth$currentUser.uid]).get().then(querySnapshot => {\n          let users = [];\n          querySnapshot.forEach(doc => {\n            users.push(doc.data());\n          });\n          setUsers(users);\n        });\n      } else {// User is signed out\n      }\n    });\n  }, []);\n  console.log(users[0]);\n\n  const selectUser = user => {\n    setChat(user);\n    console.log(user);\n  };\n\n  return /*#__PURE__*/_jsxDEV(HomeContainer, {\n    children: [/*#__PURE__*/_jsxDEV(UserContainer, {\n      children: users.map(user => /*#__PURE__*/_jsxDEV(User, {\n        user: user,\n        selectUser: selectUser\n      }, user.uid, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 32\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(ChatContainter, {\n      children: chat ? /*#__PURE__*/_jsxDEV(MessagesUser, {\n        children: /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: chat.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 17\n      }, this) : /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Select a user to start a conversation\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Home, \"FzXXW5A+hSgvem4Ct2Swi6iEku4=\");\n\n_c5 = Home;\nexport default Home;\n\nvar _c, _c2, _c3, _c4, _c5;\n\n$RefreshReg$(_c, \"HomeContainer\");\n$RefreshReg$(_c2, \"UserContainer\");\n$RefreshReg$(_c3, \"ChatContainter\");\n$RefreshReg$(_c4, \"MessagesUser\");\n$RefreshReg$(_c5, \"Home\");","map":{"version":3,"names":["React","useEffect","useState","db","auth","getAuth","onAuthStateChanged","styled","User","HomeContainer","div","UserContainer","ChatContainter","MessagesUser","Home","users","setUsers","chat","setChat","authorize","user","usersRef","collection","where","currentUser","uid","get","then","querySnapshot","forEach","doc","push","data","console","log","selectUser","map","name"],"sources":["/Users/andrewyusuf/movie-rating-sideproject/src/pages/Home.js"],"sourcesContent":["import React, {useEffect, useState} from 'react'\nimport {db, auth} from '../firebase'\nimport { getAuth, onAuthStateChanged } from \"firebase/auth\";\nimport styled from \"styled-components\"\nimport User from '../components/User';\n\nconst HomeContainer = styled.div`\n    position: relative;\n    display: grid;\n    grid-template-columns: 1fr 3fr;\n    overflow: hidden;\n    height: calc(100vh - 70px);\n    width: 100vw;\n`\n\nconst UserContainer = styled.div`\n    margin-top: 10px;\n    border-right: 2px solid #000000;\n    overflow-y: auto;\n`\n\nconst ChatContainter = styled.div`\n    position: relative;\n    width: 100%;\n`\n\nconst MessagesUser = styled.div`\n    padding:10px;\n    text-align: center;\n    border-bottom: 2px solid #000000;\n`\n\nexport const Home = () => {\n\n    const [users, setUsers] = useState([]);\n    const [chat, setChat] = useState(\"\");\n\n    useEffect(()=>{\n        const authorize = getAuth();\n        onAuthStateChanged(authorize, (user) => {\n            if (user) {\n                const usersRef = db.collection(\"users\");\n                // create query obj\n                usersRef.where('uid', 'not-in', [auth.currentUser?.uid]).get().then((querySnapshot) => {\n                    let users = []\n                    querySnapshot.forEach(doc => {\n                        users.push(doc.data())\n                    });\n                    setUsers(users);\n                })\n            } else {\n                // User is signed out\n            }\n        });\n    }, [])\n    console.log(users[0]);\n\n    const selectUser = (user) => {\n        setChat(user);\n        console.log(user);\n    }\n    \n  return (\n    <HomeContainer>\n        <UserContainer>\n            {users.map(user => <User key={user.uid} user={user} selectUser={selectUser}/>\n            )}\n        </UserContainer>\n        <ChatContainter>\n            {chat ? (\n                <MessagesUser>\n                    <h3>{chat.name}</h3>\n                </MessagesUser>\n            ) : (\n                <h3>Select a user to start a conversation</h3>\n            )}\n        </ChatContainter>\n    </HomeContainer>\n    \n  )\n}\n\n\n\nexport default Home;"],"mappings":";;;AAAA,OAAOA,KAAP,IAAeC,SAAf,EAA0BC,QAA1B,QAAyC,OAAzC;AACA,SAAQC,EAAR,EAAYC,IAAZ,QAAuB,aAAvB;AACA,SAASC,OAAT,EAAkBC,kBAAlB,QAA4C,eAA5C;AACA,OAAOC,MAAP,MAAmB,mBAAnB;AACA,OAAOC,IAAP,MAAiB,oBAAjB;;AAEA,MAAMC,aAAa,GAAGF,MAAM,CAACG,GAAI;AACjC;AACA;AACA;AACA;AACA;AACA;AACA,CAPA;KAAMD,a;AASN,MAAME,aAAa,GAAGJ,MAAM,CAACG,GAAI;AACjC;AACA;AACA;AACA,CAJA;MAAMC,a;AAMN,MAAMC,cAAc,GAAGL,MAAM,CAACG,GAAI;AAClC;AACA;AACA,CAHA;MAAME,c;AAKN,MAAMC,YAAY,GAAGN,MAAM,CAACG,GAAI;AAChC;AACA;AACA;AACA,CAJA;MAAMG,Y;AAMN,OAAO,MAAMC,IAAI,GAAG,MAAM;EAAA;;EAEtB,MAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBd,QAAQ,CAAC,EAAD,CAAlC;EACA,MAAM,CAACe,IAAD,EAAOC,OAAP,IAAkBhB,QAAQ,CAAC,EAAD,CAAhC;EAEAD,SAAS,CAAC,MAAI;IACV,MAAMkB,SAAS,GAAGd,OAAO,EAAzB;IACAC,kBAAkB,CAACa,SAAD,EAAaC,IAAD,IAAU;MACpC,IAAIA,IAAJ,EAAU;QAAA;;QACN,MAAMC,QAAQ,GAAGlB,EAAE,CAACmB,UAAH,CAAc,OAAd,CAAjB,CADM,CAEN;;QACAD,QAAQ,CAACE,KAAT,CAAe,KAAf,EAAsB,QAAtB,EAAgC,sBAACnB,IAAI,CAACoB,WAAN,sDAAC,kBAAkBC,GAAnB,CAAhC,EAAyDC,GAAzD,GAA+DC,IAA/D,CAAqEC,aAAD,IAAmB;UACnF,IAAIb,KAAK,GAAG,EAAZ;UACAa,aAAa,CAACC,OAAd,CAAsBC,GAAG,IAAI;YACzBf,KAAK,CAACgB,IAAN,CAAWD,GAAG,CAACE,IAAJ,EAAX;UACH,CAFD;UAGAhB,QAAQ,CAACD,KAAD,CAAR;QACH,CAND;MAOH,CAVD,MAUO,CACH;MACH;IACJ,CAdiB,CAAlB;EAeH,CAjBQ,EAiBN,EAjBM,CAAT;EAkBAkB,OAAO,CAACC,GAAR,CAAYnB,KAAK,CAAC,CAAD,CAAjB;;EAEA,MAAMoB,UAAU,GAAIf,IAAD,IAAU;IACzBF,OAAO,CAACE,IAAD,CAAP;IACAa,OAAO,CAACC,GAAR,CAAYd,IAAZ;EACH,CAHD;;EAKF,oBACE,QAAC,aAAD;IAAA,wBACI,QAAC,aAAD;MAAA,UACKL,KAAK,CAACqB,GAAN,CAAUhB,IAAI,iBAAI,QAAC,IAAD;QAAqB,IAAI,EAAEA,IAA3B;QAAiC,UAAU,EAAEe;MAA7C,GAAWf,IAAI,CAACK,GAAhB;QAAA;QAAA;QAAA;MAAA,QAAlB;IADL;MAAA;MAAA;MAAA;IAAA,QADJ,eAKI,QAAC,cAAD;MAAA,UACKR,IAAI,gBACD,QAAC,YAAD;QAAA,uBACI;UAAA,UAAKA,IAAI,CAACoB;QAAV;UAAA;UAAA;UAAA;QAAA;MADJ;QAAA;QAAA;QAAA;MAAA,QADC,gBAKD;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IANR;MAAA;MAAA;MAAA;IAAA,QALJ;EAAA;IAAA;IAAA;IAAA;EAAA,QADF;AAkBD,CAhDM;;GAAMvB,I;;MAAAA,I;AAoDb,eAAeA,IAAf"},"metadata":{},"sourceType":"module"}